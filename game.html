<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobius's Banana Tree Adventure</title>
    <link rel="icon" type="image/x-icon" href="pfp.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Fira Code', monospace;
            background: linear-gradient(135deg, #0a4a0a 0%, #1a5a1a 50%, #0f3f0f 100%);
            color: #00ff00;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }
        
        .game-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }
        
        .tree-trunk {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 100vh;
            background: linear-gradient(to right, #654321, #8b4513, #654321);
            border-radius: 40px 40px 0 0;
            box-shadow: inset -10px 0 20px rgba(0,0,0,0.3);
        }
        
        .branch {
            position: absolute;
            background: linear-gradient(to right, #654321, #8b4513);
            border-radius: 20px;
            z-index: 10;
        }
        
        .branch-left {
            left: -60px;
            transform-origin: right center;
            transform: rotate(-15deg);
        }
        
        .branch-right {
            right: -60px;
            transform-origin: left center;
            transform: rotate(15deg);
        }
        
        .leaf-cluster {
            position: absolute;
            font-size: 24px;
            color: #228b22;
            text-shadow: 0 0 10px #32cd32;
            animation: sway 3s ease-in-out infinite;
            z-index: 5;
        }
        
        @keyframes sway {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }
        
        .banana {
            position: absolute;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 20;
            animation: dangle 2s ease-in-out infinite;
        }
        
        @keyframes dangle {
            0%, 100% { transform: rotate(-3deg); }
            50% { transform: rotate(3deg); }
        }
        
        .banana:hover {
            transform: scale(1.3) rotate(0deg);
            text-shadow: 0 0 15px #ffd700;
        }
        
        .mobius {
            position: absolute;
            font-size: 32px;
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 30;
            cursor: pointer;
        }
        
        .mobius:hover {
            transform: scale(1.2);
            text-shadow: 0 0 20px #ffd700;
        }
        
        .hud {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ffd700;
            z-index: 100;
            min-width: 200px;
        }
        
        .score {
            color: #ffd700;
            font-size: 18px;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #ffd700;
        }
        
        .instructions {
            color: #32cd32;
            font-size: 12px;
            line-height: 1.4;
        }
        
        .game-controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #8b4513;
            z-index: 100;
        }
        
        .control-btn {
            background: #654321;
            border: 2px solid #8b4513;
            color: #ffd700;
            padding: 8px 15px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            background: #8b4513;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
            transform: scale(1.05);
        }
        
        .back-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #ffd700;
            color: #ffd700;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-family: inherit;
            font-size: 14px;
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .back-btn:hover {
            background: rgba(255, 215, 0, 0.2);
            text-shadow: 0 0 10px #ffd700;
            transform: scale(1.05);
        }
        
        .message-popup {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            border: 3px solid #ffd700;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            z-index: 200;
            display: none;
            max-width: 400px;
        }
        
        .message-popup h2 {
            color: #ffd700;
            margin-bottom: 15px;
            text-shadow: 0 0 15px #ffd700;
        }
        
        .message-popup p {
            color: #32cd32;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .cloud {
            position: absolute;
            color: #87ceeb;
            font-size: 30px;
            opacity: 0.7;
            animation: float 20s linear infinite;
        }
        
        @keyframes float {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(calc(100vw + 100px)); }
        }
        
        .bird {
            position: absolute;
            color: #ff6347;
            font-size: 16px;
            animation: fly 15s linear infinite;
        }
        
        @keyframes fly {
            0% { transform: translateX(100vw) translateY(0px); }
            50% { transform: translateX(50vw) translateY(-20px); }
            100% { transform: translateX(-100px) translateY(0px); }
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffd700;
            border-radius: 50%;
            pointer-events: none;
            animation: sparkle 1s ease-out forwards;
        }
        
        @keyframes sparkle {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(2) translate(20px, -20px);
            }
        }
    </style>
</head>
<body>
    <div class="game-container" id="gameContainer">
        <div class="tree-trunk"></div>
        
        <!-- Branches will be generated dynamically -->
        
        <div class="mobius" id="mobius">üêµ</div>
        
        <div class="hud">
            <div class="score">üçå Bananas: <span id="bananaCount">0</span></div>
            <div class="score">üêµ Level: <span id="level">1</span></div>
            <div class="instructions">
                Click bananas to collect!<br>
                Click Mobius to move him!<br>
                Use arrow keys or WASD
            </div>
        </div>
        
        <div class="game-controls">
            <button class="control-btn" onclick="resetGame()">üîÑ New Game</button>
            <button class="control-btn" onclick="addBananas()">üçå More Bananas</button>
            <button class="control-btn" onclick="speedUp()">‚ö° Speed Up</button>
        </div>
        
        <a href="index.html" class="back-btn" onclick="goBack()">üå¥ Back to Matrix</a>
        
        <div class="message-popup" id="messagePopup">
            <h2>üéâ Level Complete!</h2>
            <p>Mobius collected all the bananas! Ook ook!</p>
            <button class="control-btn" onclick="nextLevel()">üêµ Next Level</button>
        </div>
        
        <!-- Decorative elements -->
        <div class="cloud" style="top: 10%; animation-delay: 0s;">‚òÅÔ∏è</div>
        <div class="cloud" style="top: 20%; animation-delay: -10s;">‚òÅÔ∏è</div>
        <div class="bird" style="top: 15%; animation-delay: -5s;">ü¶Ö</div>
    </div>

    <script>
        let bananaCount = 0;
        let level = 1;
        let gameSpeed = 1;
        let mobiusPosition = { x: window.innerWidth / 2, y: window.innerHeight - 100 };
        
        const mobius = document.getElementById('mobius');
        const gameContainer = document.getElementById('gameContainer');
        
        // Position Mobius initially
        updateMobiusPosition();
        
        function updateMobiusPosition() {
            mobius.style.left = mobiusPosition.x + 'px';
            mobius.style.top = mobiusPosition.y + 'px';
        }
        
        function createBranches() {
            // Clear existing branches
            document.querySelectorAll('.branch, .leaf-cluster, .banana').forEach(el => el.remove());
            
            const treeHeight = window.innerHeight;
            const branchCount = 5 + level;
            
            for (let i = 0; i < branchCount; i++) {
                const height = (treeHeight / branchCount) * (i + 1);
                const isLeft = Math.random() > 0.5;
                
                // Create branch
                const branch = document.createElement('div');
                branch.className = `branch ${isLeft ? 'branch-left' : 'branch-right'}`;
                branch.style.width = '120px';
                branch.style.height = '15px';
                branch.style.top = (treeHeight - height) + 'px';
                gameContainer.appendChild(branch);
                
                // Create leaves
                const leaves = document.createElement('div');
                leaves.className = 'leaf-cluster';
                leaves.innerHTML = 'üåøüçÉüåø';
                leaves.style.top = (treeHeight - height - 20) + 'px';
                leaves.style.left = isLeft ? '30px' : (window.innerWidth - 120) + 'px';
                leaves.style.animationDelay = (i * 0.5) + 's';
                gameContainer.appendChild(leaves);
                
                // Create bananas
                if (Math.random() > 0.3) {
                    const banana = document.createElement('div');
                    banana.className = 'banana';
                    banana.innerHTML = 'üçå';
                    banana.style.top = (treeHeight - height - 10) + 'px';
                    banana.style.left = isLeft ? '80px' : (window.innerWidth - 150) + 'px';
                    banana.style.animationDelay = (i * 0.3) + 's';
                    
                    banana.addEventListener('click', collectBanana);
                    gameContainer.appendChild(banana);
                }
            }
        }
        
        function collectBanana(event) {
            const banana = event.target;
            bananaCount++;
            document.getElementById('bananaCount').textContent = bananaCount;
            
            // Create sparkle effect
            createSparkles(banana.offsetLeft, banana.offsetTop);
            
            // Remove banana
            banana.remove();
            
            // Move Mobius towards collected banana
            const bananaRect = banana.getBoundingClientRect();
            moveMobiusTo(bananaRect.left, bananaRect.top);
            
            // Check if level complete
            if (document.querySelectorAll('.banana').length === 0) {
                setTimeout(levelComplete, 1000);
            }
        }
        
        function createSparkles(x, y) {
            for (let i = 0; i < 5; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                gameContainer.appendChild(particle);
                
                setTimeout(() => particle.remove(), 1000);
            }
        }
        
        function moveMobiusTo(x, y) {
            mobiusPosition.x = x;
            mobiusPosition.y = y;
            updateMobiusPosition();
        }
        
        function levelComplete() {
            document.getElementById('level').textContent = level;
            document.getElementById('messagePopup').style.display = 'block';
        }
        
        function nextLevel() {
            level++;
            document.getElementById('level').textContent = level;
            document.getElementById('messagePopup').style.display = 'none';
            createBranches();
            
            // Reset Mobius position
            mobiusPosition = { x: window.innerWidth / 2, y: window.innerHeight - 100 };
            updateMobiusPosition();
        }
        
        function resetGame() {
            bananaCount = 0;
            level = 1;
            gameSpeed = 1;
            document.getElementById('bananaCount').textContent = bananaCount;
            document.getElementById('level').textContent = level;
            document.getElementById('messagePopup').style.display = 'none';
            
            mobiusPosition = { x: window.innerWidth / 2, y: window.innerHeight - 100 };
            updateMobiusPosition();
            createBranches();
        }
        
        function addBananas() {
            const branches = document.querySelectorAll('.branch');
            branches.forEach((branch, i) => {
                if (Math.random() > 0.5) {
                    const banana = document.createElement('div');
                    banana.className = 'banana';
                    banana.innerHTML = 'üçå';
                    banana.style.top = (branch.offsetTop - 10) + 'px';
                    banana.style.left = (branch.classList.contains('branch-left') ? '80px' : (window.innerWidth - 150) + 'px');
                    banana.addEventListener('click', collectBanana);
                    gameContainer.appendChild(banana);
                }
            });
        }
        
        function speedUp() {
            gameSpeed *= 1.2;
            document.querySelectorAll('.banana, .leaf-cluster').forEach(el => {
                el.style.animationDuration = (2 / gameSpeed) + 's';
            });
        }
        
        function goBack() {
            // In a real implementation, this would navigate back
            alert("üêµ Ook! Going back to the Matrix terminal!");
        }
        
        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            const step = 20;
            let moved = false;
            
            switch(e.key.toLowerCase()) {
                case 'arrowup':
                case 'w':
                    if (mobiusPosition.y > 50) {
                        mobiusPosition.y -= step;
                        moved = true;
                    }
                    break;
                case 'arrowdown':
                case 's':
                    if (mobiusPosition.y < window.innerHeight - 100) {
                        mobiusPosition.y += step;
                        moved = true;
                    }
                    break;
                case 'arrowleft':
                case 'a':
                    if (mobiusPosition.x > 50) {
                        mobiusPosition.x -= step;
                        moved = true;
                    }
                    break;
                case 'arrowright':
                case 'd':
                    if (mobiusPosition.x < window.innerWidth - 100) {
                        mobiusPosition.x += step;
                        moved = true;
                    }
                    break;
            }
            
            if (moved) {
                updateMobiusPosition();
                e.preventDefault();
            }
        });
        
        // Click to move Mobius
        mobius.addEventListener('click', (e) => {
            e.stopPropagation();
        });
        
        gameContainer.addEventListener('click', (e) => {
            if (e.target === gameContainer || e.target.classList.contains('tree-trunk')) {
                moveMobiusTo(e.clientX - 16, e.clientY - 16);
            }
        });
        
        // Add some ambient effects
        setInterval(() => {
            // Randomly add flying birds
            if (Math.random() > 0.95) {
                const bird = document.createElement('div');
                bird.className = 'bird';
                bird.innerHTML = Math.random() > 0.5 ? 'ü¶Ö' : 'üê¶';
                bird.style.top = (Math.random() * 200 + 50) + 'px';
                bird.style.animationDuration = (10 + Math.random() * 10) + 's';
                gameContainer.appendChild(bird);
                
                setTimeout(() => bird.remove(), 25000);
            }
        }, 2000);
        
        // Initialize game
        createBranches();
        
        // Responsive design
        window.addEventListener('resize', () => {
            createBranches();
            mobiusPosition.x = Math.min(mobiusPosition.x, window.innerWidth - 100);
            mobiusPosition.y = Math.min(mobiusPosition.y, window.innerHeight - 100);
            updateMobiusPosition();
        });
    </script>
</body>
</html>